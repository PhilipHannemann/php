<?php
/**
 * Class for managing files
 */
class FileHandler{
  private $fileName;
  private $content;
  private $file;

  function __construct($name){
    $this->fileName = $name;
  }

  public function safeFile(){
    $name = $this->fileName['filename']['name'];
    move_uploaded_file($this->fileName['filename']['tmp_name'], $name);
  }

  public function exists(){
    return $this->fileName;
  }

  public function getNextLine(){
    return fgets($this->file);
  }

  public function open(){
    $this->file = fopen($this->fileName['filename']['tmp_name'], 'r+') or die("Failed to open file");

  }

  private function get20Bytes(){
      $this->content = fread($this->file, 20);
  }

  private function sanitize(){

    if (get_magic_quotes_gpc()) {
      $this->content = stripcslashes($this->content);
    }

    $this->content = htmlentities($this->content);
  }

  public function getSignature(){

    $this->get20Bytes();
    $this->sanitize();

    return $this->content;
  }

}

?>
